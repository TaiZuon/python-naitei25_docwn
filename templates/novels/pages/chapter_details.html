{% extends "base_chapter.html" %}
{% load static %}
{% load i18n %}

{% block title %}{{ chapter.title }} - {{ novel.name }}{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'novels/css/chapter_styles.css' %}">
<link rel="stylesheet" href="{% static 'novels/css/fontawesome.all.min.css' %}">
{% endblock %}

{% block content %}
<div class="progress-bar" id="progressBar"></div>

<button class="sidebar-toggle" id="sidebarToggle" title="{% trans 'Danh sách chương' %}">
    <i class="fas fa-bars"></i>
</button>

<div class="reading-container">
    <!-- Sidebar Navigation -->
    {% include "novels/includes/chapter_sidebar.html" %}

    <!-- Main Content -->
    <div class="main-content" id="mainContent">
        <!-- Header -->
        {% include "novels/includes/chapter_header.html" %}

        <!-- Reading Content -->
        {% include "novels/includes/chapter_content.html" %}
    </div>
</div>

<!-- Controls Panel -->
{% include "novels/includes/controls_panel.html" %}

<!-- Navigation -->
{% include "novels/includes/chapter_navigation.html" %}

<!-- Reading Stats -->
{% include "novels/includes/reading_stats.html" %}

{% block extra_js %}
<script>
    window.chapterData = {
        chapterId: {{ chapter.id }},
        totalChunks: {{ total_chunks }},
        loadedChunks: {{ loaded_chunks }},
        isAuthenticated: {{ request.user.is_authenticated|yesno:"true,false" }}
    };
</script>
<script src="{% static 'novels/js/chapter_reader.js' %}"></script>
{% endblock %}

{% csrf_token %}
{% endblock %}
